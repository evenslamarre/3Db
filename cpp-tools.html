<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>3Db Console Emulator</title>
  <style>
    /* Terminal look–feel */
    body {
      background-color: #000;
      color: #0f0;
      font-family: monospace;
      margin: 0;
      padding: 10px;
    }
    #output {
      white-space: pre-wrap;
      overflow-y: auto;
      height: 90vh;
      border: 1px solid #0f0;
      padding: 10px;
      margin-bottom: 10px;
    }
    #input {
      width: 100%;
      box-sizing: border-box;
      padding: 10px;
      background-color: #000;
      color: #0f0;
      border: none;
      outline: none;
      font-family: monospace;
      font-size: 1em;
    }
  </style>
</head>
<body>
  <div id="output"></div>
  <input type="text" id="input" autocomplete="off" placeholder="Type command here..." />

  <script>
    // DOM references
    const output = document.getElementById('output');
    const input = document.getElementById('input');

    // Append a line of text to the console output
    function print(text) {
      output.innerText += text + "\n";
      output.scrollTop = output.scrollHeight;
    }

    // Returns a Promise that resolves when the user presses Enter.
    // The prompt text is printed first.
    function readLine(promptText) {
      return new Promise(resolve => {
        print(promptText);
        input.value = "";
        input.focus();
        function onEnter(e) {
          if (e.key === 'Enter') {
            const line = input.value;
            print("> " + line);
            input.value = "";
            input.removeEventListener('keydown', onEnter);
            resolve(line);
          }
        }
        input.addEventListener('keydown', onEnter);
      });
    }

    // Utility function as in your C++ code:
    function validThousandths(value) {
      const digit = Math.floor(Math.abs(value) * 1000) % 10;
      return digit === 0 || digit === 1;
    }

    // ---------------------------
    // Main interactive loop
    // ---------------------------
    async function mainMenu() {
      print("Welcome to 3Db Geometry Console Emulator");
      print("=========================================");
      let running = true;
      while (running) {
        print("\nMain Menu:");
        print("1. 2D Shapes (Area & Perimeter)");
        print("2. 3D Solids");
        print("3. Measures from a Specific Area");
        print("4. Measures from a Specific Volume");
        print("5. Quit");
        let choice = await readLine("Enter your choice (1-5):");
        choice = choice.trim();
        if (choice === "1") {
          await run2DShapes();
        } else if (choice === "2") {
          await run3DSolids();
        } else if (choice === "3") {
          await runMeasureArea();
        } else if (choice === "4") {
          await runMeasureVolume();
        } else if (choice === "5") {
          running = false;
        } else {
          print("Invalid choice. Please try again.");
        }
      }
      print("\nGoodbye!");
      input.disabled = true;
    }

    // ---------------------------
    // 1) 2D Shapes Section (Simplified)
    // ---------------------------
    async function run2DShapes() {
      print("\n--- 2D Shapes ---");
      print("1. Square (Carre)");
      print("2. Back to Main Menu");
      let choice = await readLine("Enter your choice (1-2):");
      if (choice.trim() === "1") {
        let sideStr = await readLine("Enter side length (c):");
        let c = parseFloat(sideStr);
        if (isNaN(c) || c <= 0) {
          print("Invalid side length.");
        } else {
          let area = c * c;
          let perim = 4 * c;
          print(`Square: side = ${c}\nArea = ${area}\nPerimeter = ${perim}`);
        }
      }
      // Return automatically to main menu.
    }

    // ---------------------------
    // 2) 3D Solids Section
    // ---------------------------
    async function run3DSolids() {
      print("\n--- 3D Solids ---");
      print("1. Cube");
      print("2. Sphere");
      print("3. Cylinder");
      print("4. Cone/Pyramid");
      print("5. Back to Main Menu");
      let choice = await readLine("Enter your choice (1-5):");
      choice = choice.trim();
      if (choice === "1") {
        // Cube
        let sideStr = await readLine("Enter cube edge length (c):");
        let c = parseFloat(sideStr);
        if (isNaN(c) || c <= 0) {
          print("Invalid edge length.");
        } else {
          let lateralArea = 4 * c * c;
          let totalArea = 6 * c * c;
          let volume = c * c * c;
          print(`Cube:\nEdge = ${c}\nLateral area = ${lateralArea}\nTotal area = ${totalArea}\nVolume = ${volume}`);
        }
      } else if (choice === "2") {
        // Sphere
        let rStr = await readLine("Enter sphere radius (r):");
        let r = parseFloat(rStr);
        if (isNaN(r) || r <= 0) {
          print("Invalid radius.");
        } else {
          let area = 4 * Math.PI * r * r;
          let volume = (4 / 3) * Math.PI * r * r * r;
          print(`Sphere:\nRadius = ${r}\nArea = ${area.toFixed(3)}\nVolume = ${volume.toFixed(3)}`);
        }
      } else if (choice === "3") {
        // Cylinder
        let rStr = await readLine("Enter cylinder base radius (r):");
        let r = parseFloat(rStr);
        let hStr = await readLine("Enter cylinder height (h):");
        let h = parseFloat(hStr);
        if (isNaN(r) || r <= 0 || isNaN(h) || h <= 0) {
          print("Invalid input.");
        } else {
          let lateralArea = 2 * Math.PI * r * h;
          let totalArea = lateralArea + 2 * Math.PI * r * r;
          let volume = Math.PI * r * r * h;
          print(`Cylinder:\nr = ${r}, h = ${h}\nLateral area = ${lateralArea.toFixed(3)}\nTotal area = ${totalArea.toFixed(3)}\nVolume = ${volume.toFixed(3)}`);
        }
      } else if (choice === "4") {
        // Cone/Pyramid
        print("Select base type:");
        print("1. Circle (Cone)");
        print("2. Square (Pyramid)");
        let baseChoice = await readLine("Enter your choice (1-2):");
        if (baseChoice.trim() === "1") {
          // Cone
          let rStr = await readLine("Enter base circle radius (r):");
          let r = parseFloat(rStr);
          let hStr = await readLine("Enter height (h):");
          let h = parseFloat(hStr);
          if (isNaN(r) || r <= 0 || isNaN(h) || h <= 0) {
            print("Invalid input.");
          } else {
            let g = Math.sqrt(r * r + h * h);
            let lateralArea = Math.PI * r * g;
            let baseArea = Math.PI * r * r;
            let totalArea = lateralArea + baseArea;
            let volume = (1 / 3) * Math.PI * r * r * h;
            print(`Cone:\nr = ${r}, h = ${h}\ng = ${g.toFixed(3)}\nLateral area = ${lateralArea.toFixed(3)}\nTotal area = ${totalArea.toFixed(3)}\nVolume = ${volume.toFixed(3)}`);
          }
        } else if (baseChoice.trim() === "2") {
          // Pyramid with square base
          let cStr = await readLine("Enter base square side (c):");
          let c = parseFloat(cStr);
          let hStr = await readLine("Enter height (h):");
          let h = parseFloat(hStr);
          if (isNaN(c) || c <= 0 || isNaN(h) || h <= 0) {
            print("Invalid input.");
          } else {
            let baseArea = c * c;
            let basePerim = 4 * c;
            let g = Math.sqrt(h * h + Math.pow(c / 2, 2));
            let lateralArea = (basePerim * g) / 2;
            let totalArea = lateralArea + baseArea;
            let volume = (1 / 3) * baseArea * h;
            print(`Pyramid:\nBase side = ${c}, h = ${h}\ng = ${g.toFixed(3)}\nLateral area = ${lateralArea.toFixed(3)}\nTotal area = ${totalArea.toFixed(3)}\nVolume = ${volume.toFixed(3)}`);
          }
        }
      } else {
        print("Returning to Main Menu...");
      }
    }

    // ---------------------------
    // 3) Measures from a Specific Area
    // ---------------------------
    async function runMeasureArea() {
      print("\n--- Measures from a Specific Area ---");
      let areaStr = await readLine("Enter desired area (u²):");
      let area = parseFloat(areaStr);
      if (isNaN(area) || area <= 0) {
        print("Invalid area.");
        return;
      }
      print("Select solid type:");
      print("1. Sphere");
      print("2. Cone");
      print("3. Cylinder");
      print("4. Cube");
      print("5. Prism (square base)");
      print("6. Pyramid (square base)");
      let solidChoice = await readLine("Enter choice (1-6):");
      let result = "";
      if (solidChoice.trim() === "1") {
        let r = Math.sqrt(area / (4 * Math.PI));
        result = `Sphere: For area ${area}, radius r = ${r.toFixed(3)}`;
      } else if (solidChoice.trim() === "2") {
        result = `Possible Cone dimensions for area ${area}:\n`;
        for (let r = 1.0; r <= Math.sqrt(area); r += 0.1) {
          let g = (area - Math.PI * r * r) / (Math.PI * r);
          if (g > 0) {
            let h = Math.sqrt(g * g - r * r);
            if (validThousandths(g) && r / g > 0.3 && g / r > 0.3 && h / r > 0.3 && h / g > 0.4) {
              result += `Cone: r = ${r.toFixed(2)}, h = ${h.toFixed(2)}, g = ${g.toFixed(3)}\n`;
            }
          }
        }
      } else if (solidChoice.trim() === "3") {
        result = `Possible Cylinder dimensions for area ${area}:\n`;
        for (let r = 1.0; r <= Math.sqrt(area); r += 0.1) {
          let h = (area - 2 * Math.PI * r * r) / (2 * Math.PI * r);
          if (h > 0 && validThousandths(h)) {
            result += `Cylinder: r = ${r.toFixed(2)}, h = ${h.toFixed(3)}\n`;
          }
        }
      } else if (solidChoice.trim() === "4") {
        let c = Math.sqrt(area / 6);
        result = `Cube: For area ${area}, edge c = ${c.toFixed(3)}`;
      } else if (solidChoice.trim() === "5") {
        result = `Possible Prism dimensions for area ${area}:\n`;
        for (let a = 1.0; a <= Math.sqrt(area / 2); a += 0.1) {
          let h = (area - 2 * a * a) / (4 * a);
          if (h > 0 && validThousandths(h)) {
            result += `Prism: base side = ${a.toFixed(2)}, h = ${h.toFixed(2)}\n`;
          }
        }
      } else if (solidChoice.trim() === "6") {
        result = `Possible Pyramid dimensions for area ${area}:\n`;
        for (let c = 1.0; c <= Math.sqrt(area); c += 0.1) {
          let AireLaterale = area - c * c;
          let aireTriangle = AireLaterale / 4;
          let sh = 2 * aireTriangle / c;
          let h = Math.sqrt(sh * sh - (c / 2) * (c / 2));
          if (h > 2 && validThousandths(h) && sh > 2 &&
              validThousandths(sh) && h / sh > 0.3 &&
              sh / h > 0.3 && c / h > 0.3 && h / c > 0.3) {
            result += `Pyramid: base side = ${c.toFixed(2)}, h = ${h.toFixed(2)}, sh = ${sh.toFixed(2)}\n`;
          }
        }
      }
      print(result);
      await readLine("Press Enter to return to the Main Menu.");
    }

    // ---------------------------
    // 4) Measures from a Specific Volume
    // ---------------------------
    async function runMeasureVolume() {
      print("\n--- Measures from a Specific Volume ---");
      let volStr = await readLine("Enter desired volume (u³):");
      let volume = parseFloat(volStr);
      if (isNaN(volume) || volume <= 0) {
        print("Invalid volume.");
        return;
      }
      print("Select solid type:");
      print("1. Sphere");
      print("2. Cone");
      print("3. Cylinder");
      print("4. Cube");
      print("5. Prism (square base)");
      print("6. Pyramid (square base)");
      let solidChoice = await readLine("Enter choice (1-6):");
      let result = "";
      if (solidChoice.trim() === "1") {
        let r = Math.cbrt((3 * volume) / (4 * Math.PI));
        result = `Sphere: For volume ${volume}, radius r = ${r.toFixed(3)}`;
      } else if (solidChoice.trim() === "2") {
        result = `Possible Cone dimensions for volume ${volume}:\n`;
        for (let r = 0.5; r <= Math.cbrt(volume); r += 0.1) {
          let h = (3 * volume) / (Math.PI * r * r);
          let g = Math.sqrt(r * r + h * h);
          if (g > 0 && validThousandths(g))
            result += `Cone: r = ${r.toFixed(2)}, h = ${h.toFixed(2)}, g = ${g.toFixed(2)}\n`;
        }
      } else if (solidChoice.trim() === "3") {
        result = `Possible Cylinder dimensions for volume ${volume}:\n`;
        for (let r = 0.5; r <= Math.cbrt(volume); r += 0.1) {
          let h = volume / (Math.PI * r * r);
          if (h > 0 && validThousandths(h))
            result += `Cylinder: r = ${r.toFixed(2)}, h = ${h.toFixed(2)}\n`;
        }
      } else if (solidChoice.trim() === "4") {
        let c = Math.cbrt(volume);
        result = `Cube: For volume ${volume}, edge c = ${c.toFixed(3)}`;
      } else if (solidChoice.trim() === "5") {
        result = `Possible Prism dimensions for volume ${volume}:\n`;
        for (let a = 0.5; a <= Math.cbrt(volume); a += 0.1) {
          let h = volume / (a * a);
          if (h > 0 && validThousandths(h))
            result += `Prism: base side = ${a.toFixed(2)}, h = ${h.toFixed(2)}\n`;
        }
      } else if (solidChoice.trim() === "6") {
        result = `Possible Pyramid dimensions for volume ${volume}:\n`;
        for (let c = 0.5; c <= Math.cbrt(volume * 3); c += 0.1) {
          let h = (3 * volume) / (c * c);
          if (h > 0 && validThousandths(h))
            result += `Pyramid: base side = ${c.toFixed(2)}, h = ${h.toFixed(2)}\n`;
        }
      }
      print(result);
      await readLine("Press Enter to return to the Main Menu.");
    }

    // Start the interactive console loop
    mainMenu();
  </script>
</body>
</html>
